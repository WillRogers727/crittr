.mainBody
	= render partial: 'layouts/sidebar', locals: { section: 1 } # 1 for artworks
	.gallery
		.galleryTopbar
			%h1.forumTitle Artwork Forum
			%p= @category.name
			#buttons
				- if user_signed_in?
					= link_to "New Artwork", new_category_artwork_path

			= search_form_for [@category, @search], :class => "searchBar" do |f|
				= f.search_field :title_cont 
				= f.submit	

		.artworkThumbSection
			- @artworks.each do |artwork|
				%div.artworkContainer
					.thumbnail
						- if artwork.pictures.any?
							.thumbToggles
								- i = 1 # counter to assign class names to toggles
								- unless artwork.pictures.size <= 1
									- while (i <= artwork.pictures.size) do
										.tToggle{:id => i.to_s} 
										- i+=1 #add one to counter per loop

							- c = 1 #counter to assign class names to thumbs
							- artwork.pictures.each do |p|
								.thumbImg{class: "hidden thumb-" + c.to_s}
									= image_tag p.image.url
								- c+=1 #add one to counter per loop
											
					.info	
						%h2.title= link_to artwork.title, artwork
						%p
							Category:
							- if artwork.category_id == nil
								Uncategorized
							- else 
								= Category.find(artwork.category_id).name
						%p 
							Upvotes:
							= artwork.get_upvotes.size
						%p
							Downvotes:
							= artwork.get_downvotes.size
					.extraInfo	
						%p.date
							Posted
							= time_ago_in_words(artwork.created_at)
							ago
				


%script{type: "text/javascript"}
	:plain
		$('.thumb-1').addClass('visible');
		$('.thumb-1').removeClass('hidden');

		$('.thumbnail').hover(function() {
			var activeThumb = this;
			$('.tToggle', activeThumb).hover(function() {
				var num = this.id;
				var thumbClass = "thumb-"+num;
				$('.thumbImg', activeThumb).removeClass('visible');
				$('.thumbImg', activeThumb).addClass('hidden');
				$('.'+thumbClass, activeThumb).addClass('visible');
				$('.'+thumbClass, activeThumb).removeClass('hidden');
			});
		});