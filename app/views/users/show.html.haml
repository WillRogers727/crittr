.titleSection
	%h1.threadTitle User Profile


.profileSection
	
	.profileInner
		.profilePicSection
			= image_tag @user.avatar.url(:medium)
		.profileInfoSection
			.profileInfo
				%h2= @user.username
				%p
					Member Since:
					= @user.created_at.to_date
				%p
					Posts: 
					= (@user.artworks.size) + (@user.posts.size)
				%p
					Comments: 
					= @user.comments.size

				%p
					Following:
					= @user.following.count
				%p
					Followers
					= @user.followers.count

				= render 'follow_form' if user_signed_in?
			.profileControls
				- if current_user == @user #if current user's page then add sign put button
					= link_to "Edit Profile", edit_user_registration_path
					= link_to "Sign Out", destroy_user_session_path, method: :delete
				- else
					= link_to 'Send Message', conversations_path(sender_id: current_user.id, recipient_id: @user.id), method: 'post'


%h3 Artwork Posts by this user: 

.artworkThumbSection
	- @artworks.each do |artwork|
		%div.artworkContainer
			.thumbnail
				- if artwork.pictures.any?
					.thumbToggles
						- i = 1 # counter to assign class names to toggles
						- unless artwork.pictures.size <= 1
							- while (i <= artwork.pictures.size) do
								.tToggle{:id => i.to_s} 
								- i+=1 #add one to counter per loop

					- c = 1 #counter to assign class names to thumbs
					- artwork.pictures.each do |p|
						.thumbImg{class: "hidden thumb-" + c.to_s}
							= image_tag p.image.url
						- c+=1 #add one to counter per loop
							
			.info	
				%h2.title= link_to artwork.title, artwork
				%p
					Category:
					- if artwork.category_id == nil
						Uncategorized
					- else 
						= Category.find(artwork.category_id).name
				%p
					Tags: 
					= raw artwork.tag_list.map { |t| link_to t, category_artwork_tag_path(artwork.category_id, t)}.join(', ')
				%p 
					Upvotes:
					= artwork.get_upvotes.size
				%p
					Downvotes:
					= artwork.get_downvotes.size
			.extraInfo	
				%p.date
					Posted
					= time_ago_in_words(artwork.created_at)
					ago


%h3 Question Posts by this user: 


.gallery
- @posts.each do |post|
	.postContainer
		.postThumbLeft
			.leftUpper.leftSection
				%h2.title= link_to post.title, post
				%p.date
					Published
					= time_ago_in_words(post.created_at)
					ago
			.leftLower.leftSection
				%p 
					Upvotes:
					= post.get_upvotes.size
				/ %p
				/ 	Comment (
				/ 	= post.comments.size
				/ 	)
				%p
					Tags: 
					= raw post.tag_list.map { |t| link_to t, category_post_tag_path(post.category_id, t)}.join(', ')
				%p
					- if post.answered == true
						%p.answered Answered
					- else
						%p.unanswered Unanswered
				%p
					Category:
					- if post.category_id == nil
						Uncategorized
					- else 
						= Category.find(post.category_id).name
		.postThumbRight
			.profileIcon
				= image_tag post.user.avatar.url(:thumb)	



%script{type: "text/javascript"}
	:plain
		$('.thumb-1').addClass('visible');
		$('.thumb-1').removeClass('hidden');

		$('.thumbnail').hover(function() {
			var activeThumb = this;
			$('.tToggle', activeThumb).hover(function() {
				var num = this.id;
				var thumbClass = "thumb-"+num;
				$('.thumbImg', activeThumb).removeClass('visible');
				$('.thumbImg', activeThumb).addClass('hidden');
				$('.'+thumbClass, activeThumb).addClass('visible');
				$('.'+thumbClass, activeThumb).removeClass('hidden');
			});
		});


					

