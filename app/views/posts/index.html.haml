.mainBody
	= render partial: 'layouts/sidebar', locals: { section: 2 } # 2 for posts
	.gallery
		.galleryTopbar
			.titleSubmit
				%h1.forumTitle
					=@category.name
					Posts
				.submitButton
					- if user_signed_in?
						= link_to "Submit", new_category_post_path, :class => "btn btn-m btn-orange"
			.searchForm
				= search_form_for [@category, @search], :class => "searchBar" do |f|
					.searchInput
						= f.search_field :title_cont
					= f.submit 'Search', :class => "btn btn-m btn-light"

		- @posts.each do |post|
			.postContainer
				.postThumbLeft
					.leftInner
						.leftUpper.leftSection
							%h2.title= link_to post.title, post
						.leftLower.leftSection
							%p
								- if post.category_id == nil
									Uncategorized
								- else 
									= Category.find(post.category_id).name
							%p
								Tags: 
								= raw post.tag_list.map { |t| link_to t, category_post_tag_path(post.category_id, t), :class => "tagLink"}.join(', ')
							%p
								- if post.completed == true
									%p.answered Answered
								- else
									%p.unanswered Unanswered
					.voteSection	
						.vote
							= link_to like_post_path(post), method: :put do
								= image_tag "up.svg", :class => "arrow"
						.voteCount
							- @voteCount = (post.get_upvotes.size) - (post.get_downvotes.size)
							%p= @voteCount
						.vote	
							= link_to dislike_post_path(post), method: :put do
								= image_tag "down.svg", :class => "arrow"
				.postThumbRight
					- if post.user != nil
						.userThumb
							=image_tag post.user.avatar.url(:thumb), :class => "artUserThumb"
							=link_to post.user.username, post.user, :class => "artUserName"
					-else
						%p [User Deleted]		
					%p.date
						Posted
						= time_ago_in_words(post.created_at)
						ago
		= will_paginate @posts, inner_window: 1, outer_window: 0